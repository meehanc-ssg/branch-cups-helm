# Redhill Location - CUPS Configuration
# Deployment: kubectl apply -f redhill-deployment.yaml
# OR via Helm: helm install branch-cups-redhill ./charts/branch-cups -f values/redhill-values.yaml

image:
  repository: chmeehan/branch-cups-server
  tag: "v1.1"
  pullPolicy: IfNotPresent

replicaCount: 1

service:
  type: LoadBalancer
  port: 631
  targetPort: 631

resources:
  limits:
    cpu: 500m
    memory: 512Mi
  requests:
    cpu: 250m
    memory: 256Mi

# Redhill Network Configuration
# - MetalLB LoadBalancer IP: 192.168.99.234
# - Local subnet: 192.168.100.0/24
# - Regional network: 10.100.0.0/16
# - Access: http://192.168.99.234:631
# - Allowed printers/devices only
cupsConfig: |
  LogLevel warn
  MaxLogSize 0
  Listen 0.0.0.0:631
  Listen /run/cups/cups.sock
  Browsing No
  BrowseLocalProtocols none
  DefaultAuthType Basic
  WebInterface Yes
  
  # Redhill Location Access Control
  <Location />
    Order allow,deny
    Allow localhost
    Allow 127.0.0.1
    Allow 192.168.99.234
    Allow 192.168.100.0/24
    Allow 10.100.0.0/16
  </Location>
  
  <Location /admin>
    Order allow,deny
    Allow localhost
    Allow 127.0.0.1
    Allow 192.168.99.234
    Allow 192.168.100.0/24
    Allow 10.100.0.0/16
  </Location>
  
  <Location /admin/conf>
    Require admin @SYSTEM
    Order allow,deny
    Allow localhost
    Allow 127.0.0.1
    Allow 192.168.99.234
    Allow 192.168.100.0/24
    Allow 10.100.0.0/16
  </Location>
